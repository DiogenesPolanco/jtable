(function(n){var t;n(window).on("beforeunload",function(){t=!0});n(window).on("unload",function(){t=!1});n.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:!0,defaultDateFormat:"YY-MM-DD",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:!1,loadingAnimationDelay:500,saveUserPreferences:!0,unAuthorizedRequestRedirectUrl:null,tableClass:"",ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:!0,hoverAnimationDuration:60,hoverAnimationEasing:undefined,panelClass:"panel-default",items:[]},closeRequested:function(){},formCreated:function(){},formSubmitting:function(){},formClosed:function(){},loadingRecords:function(){},recordsLoaded:function(){},rowInserted:function(){},rowsRemoved:function(){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function(){this._normalizeFieldsOptions();this._initializeFields();this._createFieldAndColumnList();this._createMainContainer();this._createTableTitle();this._createToolBar();this._createTable();this._createBusyPanel();this._createErrorDialogDiv();this._addNoDataRow();this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var t=this;n.each(t.options.fields,function(n,i){t._normalizeFieldOptions(n,i)})},_normalizeFieldOptions:function(t,i){var u,r;if(i.listClass==undefined&&(i.listClass=""),i.inputClass==undefined&&(i.inputClass=""),i.placeholder==undefined&&(i.placeholder=""),i.dependsOn&&n.type(i.dependsOn)==="string")for(u=i.dependsOn.split(","),i.dependsOn=[],r=0;r<u.length;r++)i.dependsOn.push(n.trim(u[r]))},_initializeFields:function(){this._lastPostData={};this._$tableRows=[];this._columnList=[];this._fieldList=[];this._cache=[]},_createFieldAndColumnList:function(){var t=this;n.each(t.options.fields,function(n,i){t._fieldList.push(n);i.key==!0&&(t._keyField=n);i.list!=!1&&i.type!="hidden"&&t._columnList.push(n)})},_createMainContainer:function(){this._$mainContainer=n("<div />").addClass("panel").addClass("table-responsive").addClass(this.options.toolbar.panelClass).appendTo(this.element)},_createTableTitle:function(){var t=this,i;t._$titleDiv=n("<div />").addClass("panel-heading").appendTo(t._$mainContainer);n("<div />").addClass("panel-title row").appendTo(t._$titleDiv).html('<h4 class="col-md-12">'+t.options.title+"<\/h4>");t.options.showCloseButton&&(i=n("<span />").html(t.options.messages.close),n("<button><\/button>").addClass("jtable-command-button jtable-close-button").attr("title",t.options.messages.close).append(i).appendTo(t._$titleDiv).click(function(n){n.preventDefault();n.stopPropagation();t._onCloseRequested()}))},_createTable:function(){this._$table=n("<table><\/table>").addClass("table").addClass(this.options.tableClass).appendTo(this._$mainContainer);this.options.tableId&&this._$table.attr("id",this.options.tableId);this._createTableHead();this._createTableBody()},_createTableHead:function(){var t=n("<thead><\/thead>").appendTo(this._$table);this._addRowToTableHead(t)},_addRowToTableHead:function(t){var i=n("<tr><\/tr>").appendTo(t);this._addColumnsToHeaderRow(i)},_addColumnsToHeaderRow:function(n){for(var i,r,t=0;t<this._columnList.length;t++)i=this._columnList[t],r=this._createHeaderCellForField(i,this.options.fields[i]),r.appendTo(n)},_resizePanel:function(){this._$titleDiv!=null&&this._$titleDiv!=undefined&&this._$titleDiv.css({width:this._$table.width()})},_createHeaderCellForField:function(t,i){i.width=i.width||"10%";return n("<th><\/th>").html(i.title).addClass(i.listClass).css("width",i.width).data("fieldName",t)},_createEmptyCommandHeader:function(){return n("<th><\/th>").css("width","1%")},_createTableBody:function(){this._$tableBody=n("<tbody><\/tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=n("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer);this._$busyDiv=n("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer);this._hideBusy()},_createErrorDialogDiv:function(){var t=this;t._$errorDialogDiv=n('<div class="modal fade"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button><h4 class="modal-title">'+t.options.messages.error+'<\/h4><\/div><div class="modal-body"><\/div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+t.options.messages.close+"<\/button><\/div><\/div><\/div><\/div>").appendTo(t._$mainContainer);t._$errorDialogDiv.modal({backdrop:"static",keyboard:!1,show:!1});t._$errorDialogDiv.on("hidden.bs.modal",function(){n(this).removeClass("fv-modal-stack");n("body").data("fv_open_modals")>0&&n("body").data("fv_open_modals",n("body").data("fv_open_modals")-1)});t._$errorDialogDiv.on("shown.bs.modal",function(){(n(this).find("input").length>0?n(this).find("input:first").focus():n(this).find("button").length>0&&n(this).find("button:first").focus(),typeof n("body").data("fv_open_modals")=="undefined"&&n("body").data("fv_open_modals",0),n(this).hasClass("fv-modal-stack"))||(n(this).addClass("fv-modal-stack"),n("body").data("fv_open_modals",n("body").data("fv_open_modals")+1),n(this).css("z-index",1040+10*n("body").data("fv_open_modals")),n(".modal-backdrop").not(".fv-modal-stack").css("z-index",1039+10*n("body").data("fv_open_modals")),n(".modal-backdrop").not("fv-modal-stack").addClass("fv-modal-stack"))})},load:function(n,t){this._lastPostData=n;this._reloadTable(t)},reload:function(n){this._reloadTable(n)},getRowByKey:function(n){for(var t=0;t<this._$tableRows.length;t++)if(n==this._getKeyValueOfRecord(this._$tableRows[t].data("record")))return this._$tableRows[t];return null},destroy:function(){this.element.empty();n.Widget.prototype.destroy.call(this)},_setOption:function(){},_reloadTable:function(t){var i=this,u=function(n){if(i._hideBusy(),n.Result!="OK"){i._showError(n.Message);return}i._removeAllRows("reloading");i._addRecordsToTable(n.Records);i._onRecordsLoaded(n);t&&t();i._resizePanel()},r,f;i._showBusy(i.options.messages.loadingMessage,i.options.loadingAnimationDelay);i._onLoadingRecords();n.isFunction(i.options.actions.listAction)?(r=i.options.actions.listAction(i._lastPostData,i._createJtParamsForLoading()),i._isDeferredObject(r)?r.done(function(n){u(n)}).fail(function(){i._showError(i.options.messages.serverCommunicationError)}).always(function(){i._hideBusy()}):u(r)):(f=i._createRecordLoadUrl(),i._ajax({url:f,data:i._lastPostData,success:function(n){u(n)},error:function(){i._hideBusy();i._showError(i.options.messages.serverCommunicationError)}}))},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createJtParamsForLoading:function(){return{}},_createRowFromRecord:function(t){var i=n("<tr><\/tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(t)).data("record",t);return this._addCellsToRowUsingRecord(i),i},_addCellsToRowUsingRecord:function(n){for(var i=n.data("record"),t=0;t<this._columnList.length;t++)this._createCellForRecordField(i,this._columnList[t]).appendTo(n)},_createCellForRecordField:function(t,i){return n("<td><\/td>").addClass(this.options.fields[i].listClass).append(this._getDisplayTextForRecordField(t,i))},_addRecordsToTable:function(t){var i=this;n.each(t,function(n,t){i._addRow(i._createRowFromRecord(t))})},_addRow:function(t,i){i=n.extend({index:this._$tableRows.length,isNewRow:!1,animationsEnabled:!0},i);this._$tableRows.length<=0&&this._removeNoDataRow();i.index=this._normalizeNumber(i.index,0,this._$tableRows.length,this._$tableRows.length);i.index==this._$tableRows.length?(this._$tableBody.append(t),this._$tableRows.push(t)):i.index==0?(this._$tableBody.prepend(t),this._$tableRows.unshift(t)):(this._$tableRows[i.index-1].after(t),this._$tableRows.splice(i.index,0,t));this._onRowInserted(t,i.isNewRow);i.isNewRow&&this.options.animationsEnabled&&i.animationsEnabled&&this._showNewRowAnimation(t)},_showNewRowAnimation:function(n){var t="jtable-row-created";n.addClass(t,"slow","",function(){n.removeClass(t,5e3)})},_removeRowsFromTable:function(t,i){var r=this;t.length<=0||(t.addClass("jtable-row-removed").remove(),t.each(function(){var t=r._findRowIndex(n(this));t>=0&&r._$tableRows.splice(t,1)}),r._onRowsRemoved(t,i),r._$tableRows.length==0&&r._addNoDataRow())},_findRowIndex:function(n){return this._findIndexInArray(n,this._$tableRows,function(n,t){return n.data("record")==t.data("record")})},_removeAllRows:function(n){if(!(this._$tableRows.length<=0)){var t=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty();this._$tableRows=[];this._onRowsRemoved(t,n);this._addNoDataRow()}},_addNoDataRow:function(){if(!(this._$tableBody.find(">tr.jtable-no-data-row").length>0)){var t=n("<tr><\/tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody),i=this._$table.find("thead th").length;n("<td><\/td>").attr("colspan",i).html(this.options.messages.noDataAvailable).appendTo(t)}},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_getDisplayTextForRecordField:function(n,t){var i=this.options.fields[t],r=n[t],u;return i.display?i.display({record:n}):i.type=="date"?this._getDisplayTextForDateRecordField(i,r):i.type=="checkbox"?this._getCheckBoxTextForFieldByValue(t,r):i.options?(u=this._getOptionsForField(t,{record:n,value:r,source:"list",dependedValues:this._createDependedValuesUsingRecord(n,i.dependsOn)}),this._findOptionByValue(u,r).DisplayText):r},_createDependedValuesUsingRecord:function(n,t){var r,i;if(!t)return{};for(r={},i=0;i<t.length;i++)r[t[i]]=n[t[i]];return r},_findOptionByValue:function(n,t){for(var i=0;i<n.length;i++)if(n[i].Value==t)return n[i];return{}},_getDisplayTextForDateRecordField:function(t,i){if(!i)return"";var r=t.displayFormat||this.options.defaultDateFormat,u=this._parseDate(i);return n.datepicker.formatDate(r,u)},_getOptionsForField:function(t,i){var e=this.options.fields[t],r=e.options,f,u,o;return n.isFunction(r)&&(i=n.extend(!0,{_cacheCleared:!1,dependedValues:{},clearCache:function(){this._cacheCleared=!0}},i),r=r(i)),typeof r=="string"?(u="options_"+t+"_"+r,i._cacheCleared||!this._cache[u]?(this._cache[u]=this._buildOptionsFromArray(this._downloadOptions(t,r)),this._sortFieldOptions(this._cache[u],e.optionsSorting)):i.value!=undefined&&(o=this._findOptionByValue(this._cache[u],i.value),o.DisplayText==undefined&&(this._cache[u]=this._buildOptionsFromArray(this._downloadOptions(t,r)),this._sortFieldOptions(this._cache[u],e.optionsSorting))),f=this._cache[u]):jQuery.isArray(r)?(f=this._buildOptionsFromArray(r),this._sortFieldOptions(f,e.optionsSorting)):(f=this._buildOptionsArrayFromObject(r),this._sortFieldOptions(f,e.optionsSorting)),f},_downloadOptions:function(n,t){var i=this,r=[];return i._ajax({url:t,async:!1,success:function(n){if(n.Result!="OK"){i._showError(n.Message);return}r=n.Options},error:function(){var t=i._formatString(i.options.messages.cannotLoadOptionsFor,n);i._showError(t)}}),r},_sortFieldOptions:function(t,i){var r,u;t&&t.length&&i&&(r=i.indexOf("value")==0?function(n){return n.Value}:function(n){return n.DisplayText},u=n.type(r(t[0]))=="string"?function(n,t){return r(n).localeCompare(r(t))}:function(n,t){return r(n)-r(t)},i.indexOf("desc")>0?t.sort(function(n,t){return u(t,n)}):t.sort(function(n,t){return u(n,t)}))},_buildOptionsArrayFromObject:function(t){var i=[];return n.each(t,function(n,t){i.push({Value:n,DisplayText:t})}),i},_buildOptionsFromArray:function(t){for(var r=[],i=0;i<t.length;i++)n.isPlainObject(t[i])?r.push(t[i]):r.push({Value:t[i],DisplayText:t[i]});return r},_parseDate:function(n){return n.indexOf("Date")>=0?new Date(parseInt(n.substr(6),10)):n.length==10?new Date(parseInt(n.substr(0,4),10),parseInt(n.substr(5,2),10)-1,parseInt(n.substr(8,2),10)):n.length==19?new Date(parseInt(n.substr(0,4),10),parseInt(n.substr(5,2),10)-1,parseInt(n.substr(8,2),10),parseInt(n.substr(11,2),10),parseInt(n.substr(14,2),10),parseInt(n.substr(17,2),10)):(this._logWarn("Given date is not properly formatted: "+n),"format error!")},_createToolBar:function(){this._$toolbarDiv=n('<div role="group" />').addClass("btn-group col-md-10").appendTo(this._$titleDiv.find(".panel-title"));for(var t=0;t<this.options.toolbar.items.length;t++)this._addToolBarItem(this.options.toolbar.items[t])},_addToolBarItem:function(t){var i,r,u,f;return t==undefined||t.text==undefined&&t.icon==undefined?(this._logWarn("Can not add tool bar item since it is not valid!"),this._logWarn(t),null):(i=n('<button type="button" />').addClass("btn btn-sm").appendTo(this._$toolbarDiv),t.cssClass&&i.addClass(t.cssClass),t.tooltip&&i.attr("title",t.tooltip),t.icon&&(r=n('<span class="glyphicon" aria-hidden="true"><\/span> ').appendTo(i),t.icon===!0||n.type(t.icon==="string")&&r.addClass(t.icon)),t.text&&i.append(t.text),t.click&&i.click(function(){t.click()}),u=undefined,f=undefined,this.options.toolbar.hoverAnimation&&(u=this.options.toolbar.hoverAnimationDuration,f=this.options.toolbar.hoverAnimationEasing),i)},_formatModalWindow:function(t){t.modal({backdrop:"static",keyboard:!1,show:!1});t.on("hidden.bs.modal",function(){t.removeClass("fv-modal-stack");n("body").data("fv_open_modals")>0&&n("body").data("fv_open_modals",n("body").data("fv_open_modals")-1)});t.on("shown.bs.modal",function(){(t.find("input").length>0?t.find("input:first").focus():t.find("button").length>0&&t.find("button:first").focus(),typeof n("body").data("fv_open_modals")=="undefined"&&n("body").data("fv_open_modals",0),t.hasClass("fv-modal-stack"))||(t.addClass("fv-modal-stack"),n("body").data("fv_open_modals",n("body").data("fv_open_modals")+1),t.css("z-index",1040+10*n("body").data("fv_open_modals")),n(".modal-backdrop").not(".fv-modal-stack").css("z-index",1039+10*n("body").data("fv_open_modals")),n(".modal-backdrop").not("fv-modal-stack").addClass("fv-modal-stack"))})},_showError:function(n){n="<p>"+n+"<\/p>";this._$errorDialogDiv.find(".modal-body").html(n);this._$errorDialogDiv.modal("show")},_setBusyTimer:null,_showBusy:function(n,t){var i=this,r;if(i._$busyDiv.width(i._$mainContainer.width()).height(i._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show(),r=function(){i._$busyDiv.removeClass("jtable-busy-panel-background-invisible");i._$busyMessageDiv.html(n).show()},t){if(i._setBusyTimer)return;i._setBusyTimer=setTimeout(r,t)}else r()},_hideBusy:function(){clearTimeout(this._setBusyTimer);this._setBusyTimer=null;this._$busyDiv.hide();this._$busyMessageDiv.html("").hide()},_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_performAjaxCall:function(n,t,i,r,u){this._ajax({url:n,data:t,async:i,success:r,error:u})},_unAuthorizedRequestHandler:function(){this.options.unAuthorizedRequestRedirectUrl?location.href=this.options.unAuthorizedRequestRedirectUrl:location.reload(!0)},_ajax:function(i){var u=this,r={statusCode:{401:function(){u._unAuthorizedRequestHandler()}}};r=n.extend(r,this.options.ajaxSettings,i);r.success=function(n){n&&n.UnAuthorizedRequest==!0&&u._unAuthorizedRequestHandler();i.success&&i.success(n)};r.error=function(n){if(t){n.abort();return}i.error&&i.error(arguments)};r.complete=function(){i.complete&&i.complete()};n.ajax(r)},_getKeyValueOfRecord:function(n){return n[this._keyField]},_setCookie:function(n,t){n=this._cookieKeyPrefix+n;var i=new Date;i.setDate(i.getDate()+30);document.cookie=encodeURIComponent(n)+"="+encodeURIComponent(t)+"; expires="+i.toUTCString()},_getCookie:function(n){var i,t,r;for(n=this._cookieKeyPrefix+n,i=document.cookie.split("; "),t=0;t<i.length;t++)if(i[t]&&(r=i[t].split("="),r.length==2)&&decodeURIComponent(r[0])===n)return decodeURIComponent(r[1]||"");return null},_generateCookieKeyPrefix:function(){var t=function(n){var t=0,i,r;if(n.length==0)return t;for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r,t=t&t;return t},n="";return this.options.tableId&&(n=n+this.options.tableId+"#"),n=n+this._columnList.join("$")+"#c"+this._$table.find("thead th").length,"jtable#"+t(n)},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(n){this._trigger("recordsLoaded",null,{records:n.Records,serverResponse:n})},_onRowInserted:function(n,t){this._trigger("rowInserted",null,{row:n,record:n.data("record"),isNewRow:t})},_onRowsRemoved:function(n,t){this._trigger("rowsRemoved",null,{rows:n,reason:t})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})})(jQuery),function(n){n.extend(!0,n.hik.jtable.prototype,{_getPropertyOfObject:function(n,t){if(t.indexOf(".")<0)return n[t];var i=t.substring(0,t.indexOf(".")),r=t.substring(t.indexOf(".")+1);return this._getPropertyOfObject(n[i],r)},_setPropertyOfObject:function(n,t,i){if(t.indexOf(".")<0)n[t]=i;else{var r=t.substring(0,t.indexOf(".")),u=t.substring(t.indexOf(".")+1);this._setPropertyOfObject(n[r],u,i)}},_insertToArrayIfDoesNotExists:function(t,i){n.inArray(i,t)<0&&t.push(i)},_findIndexInArray:function(n,t,i){i||(i=function(n,t){return n==t});for(var r=0;r<t.length;r++)if(i(n,t[r]))return r;return-1},_normalizeNumber:function(n,t,i,r){return n==undefined||n==null||isNaN(n)?r:n<t?t:n>i?i:n},_formatString:function(){var t,n,i;if(arguments.length==0)return null;for(t=arguments[0],n=1;n<arguments.length;n++)i="{"+(n-1)+"}",t=t.replace(i,arguments[n]);return t},_isDeferredObject:function(n){return n.then&&n.done&&n.fail},_logDebug:function(n){window.console&&console.log("jTable DEBUG: "+n)},_logInfo:function(n){window.console&&console.log("jTable INFO: "+n)},_logWarn:function(n){window.console&&console.log("jTable WARNING: "+n)},_logError:function(n){window.console&&console.log("jTable ERROR: "+n)}});Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1})}(jQuery),function(n){n.extend(!0,n.hik.jtable.prototype,{_submitFormUsingAjax:function(n,t,i,r){this._ajax({url:n,data:t,success:i,error:r})},_createInputLabelForRecordField:function(t){var i=n('<label for="Edit-'+t+'" />');return i.html(this.options.fields[t].inputTitle||this.options.fields[t].title)},_createInputForRecordField:function(t){var u=t.fieldName,r=t.value,e=t.record,o=t.formType,s=t.form,i=this.options.fields[u],f;return((r==undefined||r==null)&&(r=i.defaultValue),i.input)?(f=n(i.input({value:r,record:e,formType:o,form:s})),f.attr("id")||f.attr("id","Edit-"+u),n("<div />").addClass("form-group").addClass(i.divClass).append(f)):i.type==="date"?this._createDateInputForField(i,u,r):i.type==="time"?this._createTimeInputForField(i,u,r):i.type==="datetime"?this._createDateTimeInputForField(i,u,r):i.type==="daterange"?this._createDateRangeInputForField(i,u,r):i.type==="textarea"?this._createTextAreaForField(i,u,r):i.type==="password"?this._createPasswordInputForField(i,u,r):i.type==="checkbox"?this._createCheckboxForField(i,u,r):i.type==="number"?this._createNumberInputForField(i,u,r):i.options?i.type==="radiobutton"?this._createRadioButtonListForField(i,u,r,e,o):this._createDropDownListForField(i,u,r,e,o,s):this._createTextInputForField(i,u,r)},_createInputForHidden:function(t,i){return i==undefined&&(i=""),n('<input type="hidden" name="'+t+'" id="Edit-'+t+'"><\/input>').val(i)},_createDateInputForField:function(t,i,r){var u=n('<input class="form-control '+t.inputClass+'" id="Edit-'+i+'" type="text" name="'+i+'"><\/input>'),f,e;return r!==undefined&&u.val(r),f=t.displayFormat||this.options.defaultDateFormat,u.daterangepicker({locale:{format:f},singleDatePicker:!0}),e=n("<div />").addClass("input-group-addon").append('<i class="glyphicon glyphicon-calendar"><\/i>'),n("<div />").addClass("input-group").append(e).append(u)},_createTimeInputForField:function(t,i,r){var u=n('<input class="form-control '+t.inputClass+'" id="Edit-'+i+'" type="text" name="'+i+'"><\/input>'),f;return r!==undefined&&u.val(r),u.timepicker(),f=n("<div />").addClass("input-group-addon").append('<i class="glyphicon glyphicon-time"><\/i>'),n("<div />").addClass("input-group").append(u).append(f)},_createDateTimeInputForField:function(t,i,r){var u=n('<input class="form-control '+t.inputClass+'" id="Edit-'+i+'" type="text" name="'+i+'"><\/input>'),f=t.displayFormat||this.options.defaultDateFormat,e;u.daterangepicker({locale:{cancelLabel:"Cancel",applyLabel:"Apply",format:f},singleDatePicker:!0,timePicker:!0,timePickerIncrement:10,showDropdowns:!0});r!==undefined?u.val(moment(r).format(f)):u.val("");u.on("cancel.daterangepicker",function(){u.val("")});return e=n("<div />").addClass("input-group-addon").append('<i class="glyphicon glyphicon-calendar"><\/i>'),n("<div />").addClass("input-group").append(e).append(u)},_createDateRangeInputForField:function(t,i,r){var u=n('<input class="form-control '+t.inputClass+'" id="Edit-'+i+'" type="text" name="'+i+'"><\/input>'),e,f;return r!==undefined&&u.val(r),e=t.displayFormat||this.options.defaultDateFormat,u.daterangepicker(t.daterangeoptions),f=n("<div />").addClass("input-group-addon").append('<i class="glyphicon glyphicon-calendar"><\/i>'),n("<div />").addClass("input-group").append(f).append(u)},_createTextAreaForField:function(t,i,r){var u=n('<textarea class="form-control '+t.inputClass+'" id="Edit-'+i+'" name="'+i+'" rows="3" placeholder="'+t.placeholder+'"><\/textarea>');return r!==undefined&&u.val(r),u},_createTextInputForField:function(t,i,r){var f=t.inputClass.indexOf("disabled")>-1?'disabled="disabled"':"",u=n("<input "+f+' class="form-control '+t.inputClass+'" id="Edit-'+i+'" type="text" name="'+i+'" placeholder="'+t.placeholder+'"><\/input>');return r!==undefined&&u.val(r),u},_createNumberInputForField:function(t,i,r){var f=t.inputClass.indexOf("disabled")>-1?'disabled="disabled"':"",u=n("<input "+f+' class="'+t.inputClass+'" id="Edit-'+i+'" type="number" name="'+i+'" placeholder="'+t.placeholder+'"><\/input>');return r!==undefined&&u.val(r),u},_createPasswordInputForField:function(t,i,r){var u=n('<input class="form-control '+t.inputClass+'" id="Edit-'+i+'" type="password" placeholder="'+t.placeholder+'" name="'+i+'"><\/input>');return r!==undefined&&u.val(r),u},_createCheckboxForField:function(t,i,r){var f=this,o,u,s,e;r===undefined&&(r=f._getCheckBoxPropertiesForFieldByState(i,!1).Value);o=n("<div />").addClass("checkbox");e=n("<label />").appendTo(o);u=n('<input class="form-control '+t.inputClass+'" id="Edit-'+i+'" type="checkbox" name="'+i+'" >').appendTo(e);e.append(t.formText||f._getCheckBoxTextForFieldByValue(i,r));r!==undefined&&u.val(r);f._getIsCheckBoxSelectedForFieldByValue(i,r)&&u.attr("checked","checked");s=function(){var n=f._getCheckBoxPropertiesForFieldByState(i,u.is(":checked"));u.attr("value",n.Value);e.html(u+(t.formText||n.DisplayText))};u.click(function(){s()});u.on("change",function(){s()});return o},_createDropDownListForField:function(t,i,r,u,f,e){var o,s;return o=n('<select class="form-control '+t.inputClass+'" id="Edit-'+i+'" name="'+i+'"><\/select>'),s=this._getOptionsForField(i,{record:u,source:f,form:e,dependedValues:this._createDependedValuesUsingForm(e,t.dependsOn)}),this._fillDropDownListWithOptions(o,s,r),o},_fillDropDownListWithOptions:function(t,i,r){t.empty();for(var u=0;u<i.length;u+=1)n("<option"+(i[u].Value==r?' selected="selected"':"")+">"+i[u].DisplayText+"<\/option>").val(i[u].Value).appendTo(t)},_createDependedValuesUsingForm:function(n,t){var r,i,u,f;if(!t)return{};for(r={},i=0;i<t.length;i++)(u=t[i],f=n.find("select[name="+u+"]"),f.length<=0)||(r[u]=f.val());return r},_createRadioButtonListForField:function(t,i,r,u,f){var e=n("<div />").addClass("jtable-input jtable-radiobuttonlist-input"),o=this._getOptionsForField(i,{record:u,source:f});return n.each(o,function(u,f){var o=n('<div class=""><\/div>').addClass("jtable-radio-input").appendTo(e),s=n('<input type="radio" id="Edit-'+i+"-"+u+'" class="'+t.inputClass+'" name="'+i+'"'+(f.Value==r+""?' checked="true"':"")+" />").val(f.Value).appendTo(o),h=n("<span><\/span>").html(f.DisplayText).appendTo(o);t.setOnTextClick!=!1&&h.addClass("jtable-option-text-clickable").click(function(){s.is(":checked")||s.attr("checked",!0)})}),e},_getCheckBoxTextForFieldByValue:function(n,t){return this.options.fields[n].values[t]},_getIsCheckBoxSelectedForFieldByValue:function(n,t){return this._createCheckBoxStateArrayForFieldWithCaching(n)[1].Value.toString()==t.toString()},_getCheckBoxPropertiesForFieldByState:function(n,t){return this._createCheckBoxStateArrayForFieldWithCaching(n)[t?1:0]},_createCheckBoxStateArrayForFieldWithCaching:function(n){var t="checkbox_"+n;return this._cache[t]||(this._cache[t]=this._createCheckBoxStateArrayForField(n)),this._cache[t]},_createCheckBoxStateArrayForField:function(t){var i=[],r=0;return n.each(this.options.fields[t].values,function(n,t){r++<2&&i.push({Value:n,DisplayText:t})}),i},_makeCascadeDropDowns:function(t,i,r){var u=this;t.find("select").each(function(){var e=n(this),o=e.attr("name"),f;o&&(f=u.options.fields[o],f.dependsOn)&&n.each(f.dependsOn,function(n,s){var h=t.find("select[name="+s+"]");h.change(function(){var n={record:i,source:r,form:t,dependedValues:{}},s;n.dependedValues=u._createDependedValuesUsingForm(t,f.dependsOn);s=u._getOptionsForField(o,n);u._fillDropDownListWithOptions(e,s,undefined);e.change()})})})},_updateRecordValuesFromForm:function(t,i){for(var r,u,f,o,h,c,s,e=0;e<this._fieldList.length;e++)if((r=this._fieldList[e],u=this.options.fields[r],u.edit!=!1)&&(f=i.find('[name="'+r+'"]'),!(f.length<=0)))if(u.type=="date")if(o=f.val(),o){h=u.displayFormat||this.options.defaultDateFormat;try{c=n.datepicker.parseDate(h,o);t[r]="/Date("+c.getTime()+")/"}catch(l){this._logWarn("Date format is incorrect for field "+r+": "+o);t[r]=undefined}}else this._logDebug("Date is empty for "+r),t[r]=undefined;else u.options&&u.type=="radiobutton"?(s=f.filter(":checked"),t[r]=s.length?s.val():undefined):t[r]=f.val()},_setEnabledOfDialogButton:function(n,t,i){n&&(t!=!1?n.removeAttr("disabled").removeClass("ui-state-disabled"):n.attr("disabled","disabled").addClass("ui-state-disabled"),i&&n.find("span").text(i))}})}(jQuery),function(n){var t={_create:n.hik.jtable.prototype._create,_formatModalWindow:n.hik.jtable.prototype._formatModalWindow};n.extend(!0,n.hik.jtable.prototype,{options:{recordAdded:function(){},messages:{addNewRecord:"Add new record"}},_$addRecordDiv:null,_create:function(){(t._create.apply(this,arguments),this.options.actions.createAction)&&this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function(){var t=this;t._$addRecordDiv=n("<div />").appendTo(t._$mainContainer);t._$addRecordDiv.addClass("modal fade");t._$addRecordDiv.css({width:"auto"});t._$addRecordDiv.append('<div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button><h4>'+t.options.messages.addNewRecord+'<\/h4><\/div><div class="modal-body"><\/div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+t.options.messages.cancel+'<\/button><button type="button" id="AddRecordDialogSaveButton" class="btn btn-primary">'+t.options.messages.save+"<\/button><\/div><\/div><\/div>");t._$addRecordDiv.find("#AddRecordDialogSaveButton").click(function(){t._onSaveClickedOnCreateForm()});t._formatModalWindow(t._$addRecordDiv);t._$addRecordDiv.on("hidden.bs.modal",function(){var n=t._$addRecordDiv.find("form").first(),i=t._$addRecordDiv.find("#AddRecordDialogSaveButton").first();t._trigger("formClosed",null,{form:n,formType:"create"});t._setEnabledOfDialogButton(i,!0,t.options.messages.save);n.remove()});t.options.addRecordButton?t.options.addRecordButton.click(function(n){n.preventDefault();t._showAddRecordForm()}):t._addToolBarItem({icon:"glyphicon-plus",cssClass:"btn-default",text:t.options.messages.addNewRecord,click:function(){t._showAddRecordForm()}})},_onSaveClickedOnCreateForm:function(){var n=this,t=n._$addRecordDiv.parent().find("#AddRecordDialogSaveButton"),i=n._$addRecordDiv.find("form");n._trigger("formSubmitting",null,{form:i,formType:"create"})!=!1&&(n._setEnabledOfDialogButton(t,!1,n.options.messages.saving),n._saveAddRecordForm(i,t))},showCreateForm:function(){this._showAddRecordForm()},addRecord:function(t){var i=this,r,u;if(t=n.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,success:function(){},error:function(){}},t),!t.record){i._logWarn("options parameter in addRecord method must contain a record property.");return}if(t.clientOnly){i._addRow(i._createRowFromRecord(t.record),{isNewRow:!0,animationsEnabled:t.animationsEnabled});t.success();return}r=function(n){if(n.Result!="OK"){i._showError(n.Message);t.error(n);return}if(!n.Record){i._logError("Server must return the created Record object.");t.error(n);return}i._onRecordAdded(n);i._addRow(i._createRowFromRecord(n.Record),{isNewRow:!0,animationsEnabled:t.animationsEnabled});t.success(n)};!t.url&&n.isFunction(i.options.actions.createAction)?(u=i.options.actions.createAction(n.param(t.record)),i._isDeferredObject(u)?u.done(function(n){r(n)}).fail(function(){i._showError(i.options.messages.serverCommunicationError);t.error()}):r(u)):i._submitFormUsingAjax(t.url||i.options.actions.createAction,n.param(t.record),function(n){r(n)},function(){i._showError(i.options.messages.serverCommunicationError);t.error()})},_showAddRecordForm:function(){for(var t=this,r=n("<form><\/form>"),u,i,e,o=n('<div class="row" ><\/div>').appendTo(r),f=0;f<t._fieldList.length;f++)if((u=t._fieldList[f],i=t.options.fields[u],i.key!=!0||i.create==!0)&&i.create!=!1){if(i.type=="hidden"){r.append(t._createInputForHidden(u,i.defaultValue));continue}i.divClass===undefined&&(i.divClass="col-md-12");e=n("<div />").addClass("form-group").addClass(i.divClass).appendTo(o);e.append(t._createInputLabelForRecordField(u));e.append(i.nextItem);e.append(t._createInputForRecordField({fieldName:u,formType:"create",form:r}))}t._makeCascadeDropDowns(r,undefined,"create");r.submit(function(){return t._onSaveClickedOnCreateForm(),!1});t._$addRecordDiv.find(".modal-body").html(r);t._$addRecordDiv.modal("show");t._trigger("formCreated",null,{form:r,formType:"create"})},_saveAddRecordForm:function(t,i){var r=this,f=function(n){if(n.Result!="OK"){r._showError(n.Message);r._setEnabledOfDialogButton(i,!0,r.options.messages.save);return}if(!n.Record){r._logError("Server must return the created Record object.");r._setEnabledOfDialogButton(i,!0,r.options.messages.save);return}r._onRecordAdded(n);r._addRow(r._createRowFromRecord(n.Record),{isNewRow:!0});r._$addRecordDiv.modal("hide")},u;t.data("submitting",!0);n.isFunction(r.options.actions.createAction)?(u=r.options.actions.createAction(t.serialize()),r._isDeferredObject(u)?u.done(function(n){f(n)}).fail(function(){r._showError(r.options.messages.serverCommunicationError);r._setEnabledOfDialogButton(i,!0,r.options.messages.save)}):f(u)):r._submitFormUsingAjax(r.options.actions.createAction,t.serialize(),function(n){f(n)},function(){r._showError(r.options.messages.serverCommunicationError);r._setEnabledOfDialogButton(i,!0,r.options.messages.save)})},_onRecordAdded:function(n){this._trigger("recordAdded",null,{record:n.Record,serverResponse:n})}})}(jQuery),function(n){var t={_create:n.hik.jtable.prototype._create,_addColumnsToHeaderRow:n.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:n.hik.jtable.prototype._addCellsToRowUsingRecord,_formatModalWindow:n.hik.jtable.prototype._formatModalWindow};n.extend(!0,n.hik.jtable.prototype,{options:{recordUpdated:function(){},rowUpdated:function(){},messages:{editRecord:"Edit Record"}},_$editDiv:null,_$editingRow:null,_create:function(){(t._create.apply(this,arguments),this.options.actions.updateAction)&&this._createEditDialogDiv()},_createEditDialogDiv:function(){var t=this;t._$editDiv=n("<div><\/div>").appendTo(t._$mainContainer);t._$editDiv.addClass("modal fade");t._$editDiv.css({width:"auto"});t._$editDiv.append('<div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button><h4>'+t.options.messages.editRecord+'<\/h4><\/div><div class="modal-body"><\/div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+t.options.messages.cancel+'<\/button><button type="button" id="EditDialogSaveButton" class="btn btn-primary">'+t.options.messages.save+"<\/button><\/div><\/div><\/div>");t._$editDiv.find("#EditDialogSaveButton").click(function(){t._onSaveClickedOnEditForm()});t._formatModalWindow(t._$editDiv);t._$editDiv.on("hidden.bs.modal",function(){var i=t._$editDiv.find("form:first"),r=n("#EditDialogSaveButton");t._trigger("formClosed",null,{form:i,formType:"edit",row:t._$editingRow});t._setEnabledOfDialogButton(r,!0,t.options.messages.save);i.remove()})},_onSaveClickedOnEditForm:function(){var n=this,t,i;if(n._$editingRow.hasClass("jtable-row-removed")){n._$editDiv.modal("hide");return}t=n._$editDiv.parent().find("#EditDialogSaveButton");i=n._$editDiv.find("form");n._trigger("formSubmitting",null,{form:i,formType:"edit",row:n._$editingRow})!=!1&&(n._setEnabledOfDialogButton(t,!1,n.options.messages.saving),n._saveEditForm(i,t))},updateRecord:function(t){var i=this,u,r,f,e;if(t=n.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,success:function(){},error:function(){}},t),!t.record){i._logWarn("options parameter in updateRecord method must contain a record property.");return}if(u=i._getKeyValueOfRecord(t.record),u==undefined||u==null){i._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.");return}if(r=i.getRowByKey(u),r==null){i._logWarn('Can not found any row by key "'+u+'" on the table. Updating row must be visible on the table.');return}if(t.clientOnly){n.extend(r.data("record"),t.record);i._updateRowTexts(r);i._onRecordUpdated(r,null);t.animationsEnabled&&i._showUpdateAnimationForRow(r);t.success();return}f=function(u){if(u.Result!="OK"){i._showError(u.Message);t.error(u);return}n.extend(r.data("record"),t.record);i._updateRecordValuesFromServerResponse(r.data("record"),u);i._updateRowTexts(r);i._onRecordUpdated(r,u);t.animationsEnabled&&i._showUpdateAnimationForRow(r);t.success(u)};!t.url&&n.isFunction(i.options.actions.updateAction)?(e=i.options.actions.updateAction(n.param(t.record)),i._isDeferredObject(e)?e.done(function(n){f(n)}).fail(function(){i._showError(i.options.messages.serverCommunicationError);t.error()}):f(e)):i._submitFormUsingAjax(t.url||i.options.actions.updateAction,n.param(t.record),function(n){f(n)},function(){i._showError(i.options.messages.serverCommunicationError);t.error()})},_addColumnsToHeaderRow:function(n){t._addColumnsToHeaderRow.apply(this,arguments);this.options.actions.updateAction!=undefined&&n.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(i){var r=this,u,f;t._addCellsToRowUsingRecord.apply(this,arguments);r.options.actions.updateAction!=undefined&&(u=n('<span class="glyphicon glyphicon-pencil" aria-hidden="true"><\/span>'),f=n('<button type="button" title="'+r.options.messages.editRecord+'"><\/button>').addClass("btn btn-xs btn-info").append(u).click(function(n){n.preventDefault();n.stopPropagation();r._showEditForm(i)}),n("<td />").append(f).appendTo(i))},_showEditForm:function(t){for(var i=this,e=t.data("record"),r=n("<form><\/form>"),s,l,c=n('<div class="row" ><\/div>').appendTo(r),o=0;o<i._fieldList.length;o++){var f=i._fieldList[o],u=i.options.fields[f],h=e[f];if(u.key==!0)if(u.edit!=!0){r.append(i._createInputForHidden(f,h));continue}else r.append(i._createInputForHidden("jtRecordKey",h));if(u.edit!=!1){if(u.type=="hidden"){r.append(i._createInputForHidden(f,h));continue}u.divClass===undefined&&(u.divClass="col-md-12");s=n("<div />").addClass("form-group").addClass(u.divClass).appendTo(c);s.append(i._createInputLabelForRecordField(f));s.append(u.nextItem);l=i._getValueForRecordField(e,f);s.append(i._createInputForRecordField({fieldName:f,value:l,record:e,formType:"edit",form:r}))}}i._makeCascadeDropDowns(r,e,"edit");r.submit(function(){return i._onSaveClickedOnEditForm(),!1});i._$editingRow=t;i._$editDiv.find(".modal-body").html(r);i._$editDiv.modal("show");i._trigger("formCreated",null,{form:r,formType:"edit",record:e,row:t})},_saveEditForm:function(t,i){var r=this,f=function(n){if(n.Result!="OK"){r._showError(n.Message);r._setEnabledOfDialogButton(i,!0,r.options.messages.save);return}var u=r._$editingRow.data("record");r._updateRecordValuesFromForm(u,t);r._updateRecordValuesFromServerResponse(u,n);r._updateRowTexts(r._$editingRow);r._$editingRow.attr("data-record-key",r._getKeyValueOfRecord(u));r._onRecordUpdated(r._$editingRow,n);r.options.animationsEnabled&&r._showUpdateAnimationForRow(r._$editingRow);r._$editDiv.modal("hide")},u;n.isFunction(r.options.actions.updateAction)?(u=r.options.actions.updateAction(t.serialize()),r._isDeferredObject(u)?u.done(function(n){f(n)}).fail(function(){r._showError(r.options.messages.serverCommunicationError);r._setEnabledOfDialogButton(i,!0,r.options.messages.save)}):f(u)):r._submitFormUsingAjax(r.options.actions.updateAction,t.serialize(),function(n){f(n)},function(){r._showError(r.options.messages.serverCommunicationError);r._setEnabledOfDialogButton(i,!0,r.options.messages.save)})},_updateRecordValuesFromServerResponse:function(t,i){i&&i.Record&&n.extend(!0,t,i.Record)},_getValueForRecordField:function(n,t){var i=this.options.fields[t],r=n[t];return i.type=="date"?this._getDisplayTextForDateRecordField(i,r):r},_updateRowTexts:function(n){for(var i,r=n.data("record"),u=n.find("td"),t=0;t<this._columnList.length;t++)i=this._getDisplayTextForRecordField(r,this._columnList[t]),i===0&&(i="0"),u.eq(this._firstDataColumnOffset+t).html(i||"");this._onRowUpdated(n)},_showUpdateAnimationForRow:function(n){var t="jtable-row-updated";this.options.jqueryuiTheme&&(t=t+" ui-state-highlight");n.stop(!0,!0).addClass(t,"slow","",function(){n.removeClass(t,5e3)})},_onRowUpdated:function(n){this._trigger("rowUpdated",null,{row:n,record:n.data("record")})},_onRecordUpdated:function(n,t){this._trigger("recordUpdated",null,{record:n.data("record"),row:n,serverResponse:t})}})}(jQuery),function(n){var t={_create:n.hik.jtable.prototype._create,_addColumnsToHeaderRow:n.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:n.hik.jtable.prototype._addCellsToRowUsingRecord,_formatModalWindow:n.hik.jtable.prototype._formatModalWindow};n.extend(!0,n.hik.jtable.prototype,{options:{deleteConfirmation:!0,recordDeleted:function(){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){(t._create.apply(this,arguments),this.options.actions.deleteAction)&&this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var t=this;t._$deleteRecordDiv=n("<div />").appendTo(t._$mainContainer);t._$deleteRecordDiv.addClass("modal fade");t._$deleteRecordDiv.append('<div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button><h4>'+t.options.messages.areYouSure+'<\/h4><\/div><div class="modal-body"><\/div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+t.options.messages.cancel+'<\/button><button type="button" id="DeleteDialogButton" class="btn btn-danger">'+t.options.messages.deleteText+"<\/button><\/div>");t._formatModalWindow(t._$deleteRecordDiv);t._$deleteRecordDiv.find("#DeleteDialogButton").click(function(){if(t._$deletingRow.hasClass("jtable-row-removed")){t._$deleteRecordDiv.dialog("close");return}var i=n(this);t._setEnabledOfDialogButton(i,!1,t.options.messages.deleting);t._deleteRecordFromServer(t._$deletingRow,function(){t._removeRowsFromTableWithAnimation(t._$deletingRow);t._$deleteRecordDiv.modal("hide")},function(n){t._showError(n);t._setEnabledOfDialogButton(i,!0,t.options.messages.deleteText)})});t._$deleteRecordDiv.on("hidden.bs.modal",function(){var i=n(this).find("#DeleteDialogButton");t._setEnabledOfDialogButton(i,!0,t.options.messages.deleteText);n(this).removeClass("fv-modal-stack");n("body").data("fv_open_modals")>0&&n("body").data("fv_open_modals",n("body").data("fv_open_modals")-1)})},deleteRows:function(t){var i=this;if(t.length<=0){i._logWarn("No rows specified to jTable deleteRows method.");return}if(i._isBusy()){i._logWarn("Can not delete rows since jTable is busy!");return}if(t.length==1){i._deleteRecordFromServer(t,function(){i._removeRowsFromTableWithAnimation(t)},function(n){i._showError(n)});return}i._showBusy(i._formatString(i.options.messages.deleteProggress,0,t.length));var r=0,u=function(){return r>=t.length},f=function(){var n=t.filter(".jtable-row-ready-to-remove");n.length<t.length&&i._showError(i._formatString(i.options.messages.canNotDeletedRecords,t.length-n.length,t.length));n.length>0&&i._removeRowsFromTableWithAnimation(n);i._hideBusy()},e=0;t.each(function(){var o=n(this);i._deleteRecordFromServer(o,function(){++e;++r;o.addClass("jtable-row-ready-to-remove");i._showBusy(i._formatString(i.options.messages.deleteProggress,e,t.length));u()&&f()},function(){++r;u()&&f()})})},deleteRecord:function(t){var i=this,r;if(t=n.extend({clientOnly:!1,animationsEnabled:i.options.animationsEnabled,url:i.options.actions.deleteAction,success:function(){},error:function(){}},t),t.key==undefined){i._logWarn("options parameter in deleteRecord method must contain a key property.");return}if(r=i.getRowByKey(t.key),r==null){i._logWarn("Can not found any row by key: "+t.key);return}if(t.clientOnly){i._removeRowsFromTableWithAnimation(r,t.animationsEnabled);t.success();return}i._deleteRecordFromServer(r,function(n){i._removeRowsFromTableWithAnimation(r,t.animationsEnabled);t.success(n)},function(n){i._showError(n);t.error(n)},t.url)},_addColumnsToHeaderRow:function(n){t._addColumnsToHeaderRow.apply(this,arguments);this.options.actions.deleteAction!=undefined&&n.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(i){var r,u,f;t._addCellsToRowUsingRecord.apply(this,arguments);r=this;r.options.actions.deleteAction!=undefined&&(u=n('<span class="glyphicon glyphicon-trash"><\/span>'),f=n('<button type="button" title="'+r.options.messages.deleteText+'"><\/button>').addClass("btn btn-xs btn-danger").append(u).click(function(n){n.preventDefault();n.stopPropagation();r._deleteButtonClickedForRow(i)}),n("<td><\/td>").addClass("jtable-command-column").append(f).appendTo(i))},_deleteButtonClickedForRow:function(t){var i=this,f,u=i.options.messages.deleteConfirmation,r;if(n.isFunction(i.options.deleteConfirmation)){if(r={row:t,record:t.data("record"),deleteConfirm:!0,deleteConfirmMessage:u,cancel:!1,cancelMessage:null},i.options.deleteConfirmation(r),r.cancel){r.cancelMessage&&i._showError(r.cancelMessage);return}u=r.deleteConfirmMessage;f=r.deleteConfirm}else f=i.options.deleteConfirmation;f!=!1?(u="<p>"+u+"<\/p>",i._$deleteRecordDiv.find(".modal-body").html(u),i._showDeleteDialog(t)):i._deleteRecordFromServer(t,function(){i._removeRowsFromTableWithAnimation(t)},function(n){i._showError(n)})},_showDeleteDialog:function(n){this._$deletingRow=n;this._$deleteRecordDiv.modal("show")},_deleteRecordFromServer:function(t,i,r,u){var f=this,s=function(n){if(n.Result!="OK"){t.data("deleting",!1);r&&r(n.Message);return}f._trigger("recordDeleted",null,{record:t.data("record"),row:t,serverResponse:n});i&&i(n)},e,o;t.data("deleting")!=!0&&(t.data("deleting",!0),e={},e[f._keyField]=f._getKeyValueOfRecord(t.data("record")),!u&&n.isFunction(f.options.actions.deleteAction)?(o=f.options.actions.deleteAction(e),f._isDeferredObject(o)?o.done(function(n){s(n)}).fail(function(){t.data("deleting",!1);r&&r(f.options.messages.serverCommunicationError)}):s(o)):this._ajax({url:u||f.options.actions.deleteAction,data:e,success:function(n){s(n)},error:function(){t.data("deleting",!1);r&&r(f.options.messages.serverCommunicationError)}}))},_removeRowsFromTableWithAnimation:function(n,t){var r=this,i;t==undefined&&(t=r.options.animationsEnabled);t?(i="jtable-row-deleting",this.options.jqueryuiTheme&&(i=i+" ui-state-disabled"),n.stop(!0,!0).addClass(i,"slow","").promise().done(function(){r._removeRowsFromTable(n,"deleted")})):r._removeRowsFromTable(n,"deleted")}})}(jQuery),function(n){var t={_create:n.hik.jtable.prototype._create,_addColumnsToHeaderRow:n.hik.jtable.prototype._addColumnsToHeaderRow,_addCellsToRowUsingRecord:n.hik.jtable.prototype._addCellsToRowUsingRecord,_onLoadingRecords:n.hik.jtable.prototype._onLoadingRecords,_onRecordsLoaded:n.hik.jtable.prototype._onRecordsLoaded,_onRowsRemoved:n.hik.jtable.prototype._onRowsRemoved};n.extend(!0,n.hik.jtable.prototype,{options:{selecting:!1,multiselect:!1,selectingCheckboxes:!1,selectOnRowClick:!0,selectionChanged:function(){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:!1,_create:function(){this.options.selecting&&this.options.selectingCheckboxes&&(++this._firstDataColumnOffset,this._bindKeyboardEvents());t._create.apply(this,arguments)},_bindKeyboardEvents:function(){var t=this;n(document).keydown(function(n){switch(n.which){case 16:t._shiftKeyDown=!0}}).keyup(function(n){switch(n.which){case 16:t._shiftKeyDown=!1}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function(n){this._selectRows(n);this._onSelectionChanged()},_addColumnsToHeaderRow:function(n){this.options.selecting&&this.options.selectingCheckboxes&&(this.options.multiselect?n.append(this._createSelectAllHeader()):n.append(this._createEmptyCommandHeader()));t._addColumnsToHeaderRow.apply(this,arguments)},_addCellsToRowUsingRecord:function(n){this.options.selecting&&this._makeRowSelectable(n);t._addCellsToRowUsingRecord.apply(this,arguments)},_onLoadingRecords:function(){this.options.selecting&&this._storeSelectionList();t._onLoadingRecords.apply(this,arguments)},_onRecordsLoaded:function(){this.options.selecting&&this._restoreSelectionList();t._onRecordsLoaded.apply(this,arguments)},_onRowsRemoved:function(n,i){this.options.selecting&&i!="reloading"&&n.filter(".jtable-row-selected").length>0&&this._onSelectionChanged();t._onRowsRemoved.apply(this,arguments)},_createSelectAllHeader:function(){var t=this,i=n('<th class=""><\/th>').addClass("jtable-command-column-header jtable-column-header-selecting"),r=n("<div />").addClass("jtable-column-header-container").appendTo(i);return t._$selectAllCheckbox=n('<input type="checkbox" />').appendTo(r).click(function(){if(t._$tableRows.length<=0){t._$selectAllCheckbox.attr("checked",!1);return}var n=t._$tableBody.find(">tr.jtable-data-row");t._$selectAllCheckbox.is(":checked")?t._selectRows(n):t._deselectRows(n);t._onSelectionChanged()}),i},_storeSelectionList:function(){var t=this;t.options.selecting&&(t._selectedRecordIdsBeforeLoad=[],t._getSelectedRows().each(function(){t._selectedRecordIdsBeforeLoad.push(t._getKeyValueOfRecord(n(this).data("record")))}))},_restoreSelectionList:function(){var t=this,r,i,u;if(t.options.selecting){for(r=0,i=0;i<t._$tableRows.length;++i)u=t._getKeyValueOfRecord(t._$tableRows[i].data("record")),n.inArray(u,t._selectedRecordIdsBeforeLoad)>-1&&(t._selectRows(t._$tableRows[i]),++r);t._selectedRecordIdsBeforeLoad.length>0&&t._selectedRecordIdsBeforeLoad.length!=r&&t._onSelectionChanged();t._selectedRecordIdsBeforeLoad=[];t._refreshSelectAllCheckboxState()}},_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function(t){var i=this,r,u;i.options.selectOnRowClick&&t.click(function(){i._invertRowSelection(t)});i.options.selectingCheckboxes&&(r=n("<td><\/td>").addClass("jtable-selecting-column"),u=n('<input type="checkbox" />').appendTo(r),i.options.selectOnRowClick||u.click(function(){i._invertRowSelection(t)}),t.append(r))},_invertRowSelection:function(n){var t,i,r;n.hasClass("jtable-row-selected")?this._deselectRows(n):this._shiftKeyDown?(t=this._findRowIndex(n),i=this._findFirstSelectedRowIndexBeforeIndex(t)+1,i>0&&i<t?this._selectRows(this._$tableBody.find("tr").slice(i,t+1)):(r=this._findFirstSelectedRowIndexAfterIndex(t)-1,r>t?this._selectRows(this._$tableBody.find("tr").slice(t,r+1)):this._selectRows(n))):this._selectRows(n);this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(n){for(var t=n-1;t>=0;--t)if(this._$tableRows[t].hasClass("jtable-row-selected"))return t;return-1},_findFirstSelectedRowIndexAfterIndex:function(n){for(var t=n+1;t<this._$tableRows.length;++t)if(this._$tableRows[t].hasClass("jtable-row-selected"))return t;return-1},_selectRows:function(n){this.options.multiselect||this._deselectRows(this._getSelectedRows());n.addClass("jtable-row-selected");this.options.selectingCheckboxes&&n.find(">td.jtable-selecting-column >input").prop("checked",!0);this._refreshSelectAllCheckboxState()},_deselectRows:function(n){n.removeClass("jtable-row-selected ui-state-highlight");this.options.selectingCheckboxes&&n.find(">td.jtable-selecting-column >input").prop("checked",!1);this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(this.options.selectingCheckboxes&&this.options.multiselect){var t=this._$tableRows.length,n=this._getSelectedRows().length;n==0?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!1)):n==t?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!0)):(this._$selectAllCheckbox.attr("checked",!1),this._$selectAllCheckbox.prop("indeterminate",!0))}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})}(jQuery),function(n){var t={load:n.hik.jtable.prototype.load,_create:n.hik.jtable.prototype._create,_setOption:n.hik.jtable.prototype._setOption,_createRecordLoadUrl:n.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:n.hik.jtable.prototype._createJtParamsForLoading,_addRowToTable:n.hik.jtable.prototype._addRowToTable,_addRow:n.hik.jtable.prototype._addRow,_removeRowsFromTable:n.hik.jtable.prototype._removeRowsFromTable,_onRecordsLoaded:n.hik.jtable.prototype._onRecordsLoaded,_resizePanel:n.hik.jtable.prototype._resizePanel};n.extend(!0,n.hik.jtable.prototype,{options:{paging:!1,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:!0,messages:{pagingInfo:"Showing {0}-{1} of {2} entries",pageSizeChangeLabel:"Row count: "}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){t._create.apply(this,arguments);this.options.paging&&(this._loadPagingSettings(),this._createBottomPanel(),this._createPageListArea(),this._createPageSizeSelection())},_loadPagingSettings:function(){if(this.options.saveUserPreferences){var n=this._getCookie("page-size");n&&(this.options.pageSize=this._normalizeNumber(n,1,1e6,this.options.pageSize))}},_createBottomPanel:function(){this._$bottomPanel=n("<div />").addClass("panel-footer").insertAfter(this._$table);n("<div />").addClass("jtable-left-area").addClass("pull-left").css("margin-top","5px").appendTo(this._$bottomPanel);n("<div />").addClass("jtable-right-area").css({"text-align":"right"}).appendTo(this._$bottomPanel)},_createPageListArea:function(){this._$pagingListArea=n("<ul><\/ul>").addClass("pagination pagination-sm").css({"margin-top":"0","margin-bottom":"0"}).appendTo(this._$bottomPanel.find(".jtable-right-area"));this._$pageInfoSpan=n("<span><\/span>").addClass("jtable-page-info").appendTo(this._$bottomPanel.find(".jtable-left-area"))},_createPageSizeSelection:function(){var t=this,i,r;if(t.options.pageSizeChangeArea){for(t._findIndexInArray(t.options.pageSize,t.options.pageSizes)<0&&(t.options.pageSizes.push(parseInt(t.options.pageSize)),t.options.pageSizes.sort(function(n,t){return n-t})),t._$pageSizeChangeArea=n("<div />").addClass("col-md-2").appendTo(t._$titleDiv.find(".panel-title")),i=n("<select><\/select>").css({color:"black"}).appendTo(t._$pageSizeChangeArea),t._$pageSizeChangeArea.append(t.options.messages.pageSizeChangeLabel).append(i),r=0;r<t.options.pageSizes.length;r++)i.append('<option value="'+t.options.pageSizes[r]+'">'+t.options.pageSizes[r]+"<\/option>");i.val(t.options.pageSize);i.change(function(){t._changePageSize(parseInt(n(this).val()))})}},_resizePanel:function(){t._resizePanel.apply(this,arguments);this._$bottomPanel!=null&&this._$bottomPanel!=undefined&&this._$bottomPanel.css({width:this._$table.width()})},load:function(){this._currentPageNo=1;t.load.apply(this,arguments);this._resizePanel()},_setOption:function(n,i){t._setOption.apply(this,arguments);n=="pageSize"&&this._changePageSize(parseInt(i))},_changePageSize:function(n){var i,t,r;n!=this.options.pageSize&&(this.options.pageSize=n,i=this._calculatePageCount(),this._currentPageNo>i&&(this._currentPageNo=i),this._currentPageNo<=0&&(this._currentPageNo=1),t=this._$bottomPanel.find(".jtable-page-size-change select"),t.length>0&&parseInt(t.val())!=n&&(r=t.find("option[value="+n+"]"),r.length>0&&t.val(n)),this._savePagingSettings(),this._reloadTable())},_savePagingSettings:function(){this.options.saveUserPreferences&&this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function(){var n=t._createRecordLoadUrl.apply(this,arguments);return this._addPagingInfoToUrl(n,this._currentPageNo)},_createJtParamsForLoading:function(){var n=t._createJtParamsForLoading.apply(this,arguments);return this.options.paging&&(n.jtStartIndex=(this._currentPageNo-1)*this.options.pageSize,n.jtPageSize=this.options.pageSize),n},_addRowToTable:function(n,i,r){if(r&&this.options.paging){this._reloadTable();return}t._addRowToTable.apply(this,arguments)},_addRow:function(n,i){if(i&&i.isNewRow&&this.options.paging){this._reloadTable();return}t._addRow.apply(this,arguments)},_removeRowsFromTable:function(){t._removeRowsFromTable.apply(this,arguments);this.options.paging&&(this._$tableRows.length<=0&&this._currentPageNo>1&&--this._currentPageNo,this._reloadTable())},_onRecordsLoaded:function(n){this.options.paging&&(this._totalRecordCount=n.TotalRecordCount,this._createPagingList(),this._createPagingInfo());t._onRecordsLoaded.apply(this,arguments)},_addPagingInfoToUrl:function(n,t){if(!this.options.paging)return n;var i=(t-1)*this.options.pageSize,r=this.options.pageSize;return n+(n.indexOf("?")<0?"?":"&")+"jtStartIndex="+i+"&jtPageSize="+r},_createPagingList:function(){if(!(this.options.pageSize<=0)&&(this._$pagingListArea.empty(),!(this._totalRecordCount<=0))){var n=this._calculatePageCount();this._createFirstAndPreviousPageButtons();this.options.pageList=="normal"&&this._createPageNumberButtons(this._calculatePageNumbers(n));this._createLastAndNextPageButtons(n);this._bindClickEventsToPageNumberButtons()}},_createFirstAndPreviousPageButtons:function(){var t=n("<li />").html('<a aria-label="First" href="#"><span aria-hidden="true">&lt&lt<\/span><\/a>').data("pageNumber",1).appendTo(this._$pagingListArea),i=n("<li />").html('<a aria-label="Previous" href="#"><span aria-hidden="true">&lt<\/span><\/a>').data("pageNumber",this._currentPageNo-1).appendTo(this._$pagingListArea);this._currentPageNo<=1&&(t.addClass("disabled"),i.addClass("disabled"))},_createLastAndNextPageButtons:function(t){var i=n("<li />").html('<a aria-label="Next" href="#"><span aria-hidden="true">&gt<\/span><\/a>').data("pageNumber",this._currentPageNo+1).appendTo(this._$pagingListArea),r=n("<li />").html('<a aria-label="Last" href="#"><span aria-hidden="true">&gt&gt<\/span><\/a>').data("pageNumber",t).appendTo(this._$pagingListArea);this._currentPageNo>=t&&(i.addClass("disabled"),r.addClass("disabled"))},_createPageNumberButtons:function(t){for(var r=0,i=0;i<t.length;i++)t[i]-r>1&&n("<li />").html('<a href="#">...<\/a>').appendTo(this._$pagingListArea),this._createPageNumberButton(t[i]),r=t[i]},_createPageNumberButton:function(t){var i=n("<li />").html('<a href="#">'+t+"<\/a>").data("pageNumber",t).appendTo(this._$pagingListArea);this._currentPageNo==t&&i.addClass("active")},_calculatePageCount:function(){var n=Math.floor(this._totalRecordCount/this.options.pageSize);return this._totalRecordCount%this.options.pageSize!=0&&++n,n},_calculatePageNumbers:function(n){var r,i;if(n<=4){for(r=[],i=1;i<=n;++i)r.push(i);return r}var t=[1,2,n-1,n],u=this._normalizeNumber(this._currentPageNo-1,1,n,1),f=this._normalizeNumber(this._currentPageNo+1,1,n,1);return this._insertToArrayIfDoesNotExists(t,u),this._insertToArrayIfDoesNotExists(t,this._currentPageNo),this._insertToArrayIfDoesNotExists(t,f),t.sort(function(n,t){return n-t}),t},_createPagingInfo:function(){var t,n,i;if(this._totalRecordCount<=0){this._$pageInfoSpan.empty();return}t=(this._currentPageNo-1)*this.options.pageSize+1;n=this._currentPageNo*this.options.pageSize;n=this._normalizeNumber(n,t,this._totalRecordCount,0);n>=t&&(i=this._formatString(this.options.messages.pagingInfo,t,n,this._totalRecordCount),this._$pageInfoSpan.html(i))},_bindClickEventsToPageNumberButtons:function(){var t=this;t._$pagingListArea.find("li").not(".disabled").not(".active").click(function(i){i.preventDefault();t._changePage(n(this).data("pageNumber"))})},_changePage:function(n){n!=undefined&&(n=this._normalizeNumber(n,1,this._calculatePageCount(),1),n!=this._currentPageNo)&&(this._currentPageNo=n,this._reloadTable())}})}(jQuery),function(n){var t={_initializeFields:n.hik.jtable.prototype._initializeFields,_normalizeFieldOptions:n.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:n.hik.jtable.prototype._createHeaderCellForField,_createRecordLoadUrl:n.hik.jtable.prototype._createRecordLoadUrl,_createJtParamsForLoading:n.hik.jtable.prototype._createJtParamsForLoading};n.extend(!0,n.hik.jtable.prototype,{options:{sorting:!1,multiSorting:!1,defaultSorting:""},_lastSorting:null,_initializeFields:function(){t._initializeFields.apply(this,arguments);this._lastSorting=[];this.options.sorting&&this._buildDefaultSortingArray()},_normalizeFieldOptions:function(n,i){t._normalizeFieldOptions.apply(this,arguments);i.sorting=i.sorting!=!1},_createHeaderCellForField:function(n,i){var r=t._createHeaderCellForField.apply(this,arguments);return this.options.sorting&&i.sorting&&this._makeColumnSortable(r,n),r},_createRecordLoadUrl:function(){var n=t._createRecordLoadUrl.apply(this,arguments);return this._addSortingInfoToUrl(n)},_buildDefaultSortingArray:function(){var t=this;n.each(t.options.defaultSorting.split(","),function(i,r){n.each(t.options.fields,function(n,i){if(i.sorting){var u=r.indexOf(n);u>-1&&(r.toUpperCase().indexOf(" DESC",u)>-1?t._lastSorting.push({fieldName:n,sortOrder:"DESC"}):t._lastSorting.push({fieldName:n,sortOrder:"ASC"}))}})})},_makeColumnSortable:function(t,i){var r=this;t.addClass("jtable-column-header-sortable").click(function(n){n.preventDefault();r.options.multiSorting&&n.ctrlKey||(r._lastSorting=[]);r._sortTableByColumn(t)});n.each(this._lastSorting,function(n,r){r.fieldName==i&&(r.sortOrder=="DESC"?t.addClass("jtable-column-header-sorted-desc"):t.addClass("jtable-column-header-sorted-asc"))})},_sortTableByColumn:function(n){this._lastSorting.length==0&&n.siblings().removeClass("jtable-column-header-sorted-asc jtable-column-header-sorted-desc");for(var t=0;t<this._lastSorting.length;t++)this._lastSorting[t].fieldName==n.data("fieldName")&&this._lastSorting.splice(t--,1);n.hasClass("jtable-column-header-sorted-asc")?(n.removeClass("jtable-column-header-sorted-asc").addClass("jtable-column-header-sorted-desc"),this._lastSorting.push({fieldName:n.data("fieldName"),sortOrder:"DESC"})):(n.removeClass("jtable-column-header-sorted-desc").addClass("jtable-column-header-sorted-asc"),this._lastSorting.push({fieldName:n.data("fieldName"),sortOrder:"ASC"}));this._reloadTable()},_addSortingInfoToUrl:function(t){if(!this.options.sorting||this._lastSorting.length==0)return t;var i=[];return n.each(this._lastSorting,function(n,t){i.push(t.fieldName+" "+t.sortOrder)}),t+(t.indexOf("?")<0?"?":"&")+"jtSorting="+i.join(",")},_createJtParamsForLoading:function(){var r=t._createJtParamsForLoading.apply(this,arguments),i;return this.options.sorting&&this._lastSorting.length&&(i=[],n.each(this._lastSorting,function(n,t){i.push(t.fieldName+" "+t.sortOrder)}),r.jtSorting=i.join(",")),r}})}(jQuery),function(n){var t={_create:n.hik.jtable.prototype._create,_normalizeFieldOptions:n.hik.jtable.prototype._normalizeFieldOptions,_createHeaderCellForField:n.hik.jtable.prototype._createHeaderCellForField,_createCellForRecordField:n.hik.jtable.prototype._createCellForRecordField};n.extend(!0,n.hik.jtable.prototype,{options:{tableId:undefined,columnResizable:!0,columnSelectable:!0},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){t._create.apply(this,arguments);this._createColumnResizeBar();this._createColumnSelection();this.options.saveUserPreferences&&this._loadColumnSettings();this._normalizeColumnWidths()},_normalizeFieldOptions:function(n,i){t._normalizeFieldOptions.apply(this,arguments);this.options.columnResizable&&(i.columnResizable=i.columnResizable!=!1);i.visibility||(i.visibility="visible")},_createHeaderCellForField:function(n,i){var r=t._createHeaderCellForField.apply(this,arguments);return this.options.columnResizable&&i.columnResizable&&n!=this._columnList[this._columnList.length-1]&&this._makeColumnResizable(r),i.visibility=="hidden"&&r.hide(),r},_createCellForRecordField:function(n,i){var r=t._createCellForRecordField.apply(this,arguments),u=this.options.fields[i];return u.visibility=="hidden"&&r.hide(),r},changeColumnVisibility:function(n,t){this._changeColumnVisibilityInternal(n,t);this._normalizeColumnWidths();this.options.saveUserPreferences&&this._saveColumnSettings()},_changeColumnVisibilityInternal:function(n,t){var u=this._columnList.indexOf(n),i,r;if(u<0){this._logWarn('Column "'+n+'" does not exist in fields!');return}if(["visible","hidden","fixed"].indexOf(t)<0){this._logWarn('Visibility value is not valid: "'+t+'"! Options are: visible, hidden, fixed.');return}(i=this.options.fields[n],i.visibility!=t)&&(r=this._firstDataColumnOffset+u+1,i.visibility!="hidden"&&t=="hidden"?this._$table.find(">thead >tr >th:nth-child("+r+"),>tbody >tr >td:nth-child("+r+")").hide():i.visibility=="hidden"&&t!="hidden"&&this._$table.find(">thead >tr >th:nth-child("+r+"),>tbody >tr >td:nth-child("+r+")").show().css("display","table-cell"),i.visibility=t)},_createColumnSelection:function(){var t=this;this._$columnSelectionDiv=n("<div />").addClass("jtable-column-selection-container").appendTo(t._$mainContainer);this._$table.children("thead").bind("contextmenu",function(i){if(t.options.columnSelectable){i.preventDefault();n("<div />").addClass("jtable-contextmenu-overlay").click(function(){n(this).remove();t._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return!1}).appendTo(document.body);t._fillColumnSelection();var e=t._$mainContainer.offset(),o=i.pageY-e.top,u=i.pageX-e.left,r=100,f=t._$mainContainer.width();f>r&&u>f-r&&(u=f-r);t._$columnSelectionDiv.css({position:"absolute",left:u,top:o,"min-width":r+"px"}).show()}})},_fillColumnSelection:function(){for(var u=this,f=n("<ul><\/ul>").addClass("jtable-column-select-list"),i=0;i<this._columnList.length;i++){var t=this._columnList[i],r=this.options.fields[t],o=n("<li><\/li>").appendTo(f),s=n('<label for="'+t+'"><\/label>').append(n("<span>"+(r.title||t)+"<\/span>")).appendTo(o),e=n('<input type="checkbox" name="'+t+'">').prependTo(s).click(function(){var t=n(this),i=t.attr("name"),r=u.options.fields[i];r.visibility!="fixed"&&u.changeColumnVisibility(i,t.is(":checked")?"visible":"hidden")});r.visibility!="hidden"&&e.attr("checked","checked");r.visibility=="fixed"&&e.attr("disabled","disabled")}this._$columnSelectionDiv.html(f)},_createColumnResizeBar:function(){this._$columnResizeBar=n("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function(t){var i=this;n("<div />").addClass("jtable-column-resize-handler").appendTo(t.find(".jtable-column-header-container")).mousedown(function(r){var f,u,e,o,s;(r.preventDefault(),r.stopPropagation(),f=i._$mainContainer.offset(),u=t.nextAll("th.jtable-column-header:visible:first"),u.length)&&(e=10,i._currentResizeArgs={currentColumnStartWidth:t.outerWidth(),minWidth:e,maxWidth:t.outerWidth()+u.outerWidth()-e,mouseStartX:r.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}},o=function(n){if(i._currentResizeArgs){var t=i._normalizeNumber(n.pageX,i._currentResizeArgs.minResizeX(),i._currentResizeArgs.maxResizeX());i._$columnResizeBar.css("left",t-f.left+"px")}},s=function(r){if(i._currentResizeArgs){n(document).unbind("mousemove",o);n(document).unbind("mouseup",s);i._$columnResizeBar.hide();var h=r.pageX-i._currentResizeArgs.mouseStartX,f=i._normalizeNumber(i._currentResizeArgs.currentColumnStartWidth+h,i._currentResizeArgs.minWidth,i._currentResizeArgs.maxWidth),c=u.outerWidth()+(i._currentResizeArgs.currentColumnStartWidth-f),e=t.data("width-in-percent")/i._currentResizeArgs.currentColumnStartWidth;t.data("width-in-percent",f*e);u.data("width-in-percent",c*e);t.css("width",t.data("width-in-percent")+"%");u.css("width",u.data("width-in-percent")+"%");i._normalizeColumnWidths();i._currentResizeArgs=null;i.options.saveUserPreferences&&i._saveColumnSettings()}},i._$columnResizeBar.show().css({top:t.offset().top-f.top+"px",left:r.pageX-f.left+"px",height:i._$table.outerHeight()+"px"}),n(document).bind("mousemove",o),n(document).bind("mouseup",s))})},_normalizeColumnWidths:function(){var f=this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%"),i=this._$table.find(">thead th.jtable-column-header"),r=0,t,u;i.each(function(){var t=n(this);t.is(":visible")&&(r+=t.outerWidth())});t={};u=100-f.length;i.each(function(){var i=n(this),f,e;i.is(":visible")&&(f=i.data("fieldName"),e=i.outerWidth()*u/r,t[f]=e)});i.each(function(){var i=n(this),r;i.is(":visible")&&(r=i.data("fieldName"),i.data("width-in-percent",t[r]).css("width",t[r]+"%"))})},_saveColumnSettings:function(){var i=this,t="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var r=n(this),u=r.data("fieldName"),f=r.data("width-in-percent"),e=i.options.fields[u].visibility,o=u+"="+e+";"+f;t=t+o+"|"});this._setCookie("column-settings",t.substr(0,t.length-1))},_loadColumnSettings:function(){var i=this,r=this._getCookie("column-settings"),t,u;r&&(t={},n.each(r.split("|"),function(n,i){var r=i.split("="),f=r[0],u=r[1].split(";");t[f]={columnVisibility:u[0],columnWidth:u[1]}}),u=this._$table.find(">thead >tr >th.jtable-column-header"),u.each(function(){var u=n(this),r=u.data("fieldName"),f=i.options.fields[r];t[r]&&(f.visibility!="fixed"&&i._changeColumnVisibilityInternal(r,t[r].columnVisibility),u.data("width-in-percent",t[r].columnWidth).css("width",t[r].columnWidth+"%"))}))}})}(jQuery),function(n){var t={_removeRowsFromTable:n.hik.jtable.prototype._removeRowsFromTable};n.extend(!0,n.hik.jtable.prototype,{options:{openChildAsAccordion:!1},openChildTable:function(t,i,r){var u=this;i.jqueryuiTheme==undefined&&(i.jqueryuiTheme=u.options.jqueryuiTheme);i.showCloseButton=i.showCloseButton!=!1;i.showCloseButton&&!i.closeRequested&&(i.closeRequested=function(){u.closeChildTable(t)});u.options.openChildAsAccordion&&t.siblings(".jtable-data-row").each(function(){u.closeChildTable(n(this))});u.closeChildTable(t,function(){var e=u.getChildRow(t).children("td").empty(),f=n("<div />").addClass("jtable-child-table-container").appendTo(e);e.data("childTable",f);f.jtable(i);u.openChildRow(t);f.hide().slideDown("fast",function(){r&&r({childTable:f})})})},closeChildTable:function(n,t){var u=this,r=this.getChildRow(n).children("td"),i=r.data("childTable");if(!i){t&&t();return}r.data("childTable",null);i.slideUp("fast",function(){i.jtable("destroy");i.remove();u.closeChildRow(n);t&&t()})},isChildRowOpen:function(n){return this.getChildRow(n).is(":visible")},getChildRow:function(n){return n.data("childRow")||this._createChildRow(n)},openChildRow:function(n){var t=this.getChildRow(n);return t.is(":visible")||t.show(),t},closeChildRow:function(n){var t=this.getChildRow(n);t.is(":visible")&&t.hide()},_removeRowsFromTable:function(i,r){r=="deleted"&&i.each(function(){var i=n(this),t=i.data("childRow");t&&t.remove()});t._removeRowsFromTable.apply(this,arguments)},_createChildRow:function(t){var r=this._$table.find("thead th").length,i=n("<tr><\/tr>").addClass("jtable-child-row").append('<td colspan="'+r+'"><\/td>');return t.after(i),t.data("childRow",i),i.hide(),i}})}(jQuery);